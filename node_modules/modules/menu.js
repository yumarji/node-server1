const readlineSync = require("readline-sync")
const addTask = require("./addTask");
const deleteTask = require("./deleteTask")
const completedTask = require("./completedTask")
const printTaskList = require("./printTaskList")
const serverTL = require("./serverTL")


let taskList = [];

function menu() {
    console.log("==============================================");
    console.log("                    MENU                      ");
    console.log("==============================================");
    console.log("1. Add one task.");
    console.log("2. Delete one task.");
    console.log("3. Mark a task as completed.");
    console.log("4. Print task list.");
    console.log("5. Exit.");
  
    const menuOption = readlineSync.question("Please choose an option: ");
  
    if(menuOption > 0 && menuOption <6){
    switch (menuOption) {
      case "1":   
      async function addAsync (taskList){  
       await addTask(taskList) 
       menu()
      }
      addAsync(taskList);
        break;
      case "2":
        deleteTask(taskList).then(menu(taskList))
        break;
      case "3":
        completedTask(taskList).then(menu(taskList))     
        break;
      case "4":
        printTaskList(taskList)
        
        menu(taskList)
        break;
      case "5":
        serverTL(taskList)
        console.log("Saving List on the server");  
        console.log("You have quit the program");    
    }
}else{
    console.log("Enter a valid option.")
    menu()
}  
    
  }
  
  module.exports = menu;